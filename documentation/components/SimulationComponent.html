<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>smart-light documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">smart-light documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../">smart-light documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <span class="fa fa-archive"></span>
                            <span>Modules</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            ></span>
                        </a>
                        <ul class="links collapse in"
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/AppModule.html" >AppModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-components-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AppComponent.html" >AppComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DrawingComponent.html" >DrawingComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SetupComponent.html" >SetupComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/SimulationComponent.html"  class="active" >SimulationComponent</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-classes-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/Junction.html" >Junction</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Lamp.html" >Lamp</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/MovingObject.html" >MovingObject</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Road.html" >Road</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/SimulationState.html" >SimulationState</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/SmartCityModel.html" >SmartCityModel</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/TrafficSensor.html" >TrafficSensor</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                    </li>
            
                    <li class="chapter">
                        <div class="simple">
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                    data-target="#xs-injectables-links"
                                ></span>
                        </div>
                        <ul class="links collapse in"
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/DrawingService.html" >DrawingService</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/SetupService.html" >SetupService</a>
                                </li>
                        </ul>
                    </li>
            
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../">smart-light documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a href="../" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <span class="fa fa-archive"></span>
                                   <span>Modules</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#modules-links"
                                   ></span>
                               </a>
                               <ul class="links collapse in"
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/AppModule.html" >AppModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/AppRoutingModule.html" >AppRoutingModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#components-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AppComponent.html" >AppComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DrawingComponent.html" >DrawingComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SetupComponent.html" >SetupComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/SimulationComponent.html"  class="active" >SimulationComponent</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#classes-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/Junction.html" >Junction</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Lamp.html" >Lamp</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/MovingObject.html" >MovingObject</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Road.html" >Road</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/SimulationState.html" >SimulationState</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/SmartCityModel.html" >SmartCityModel</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/TrafficSensor.html" >TrafficSensor</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../routes.html" ><span class="fa fa-code-fork"></span>Routes</a>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple">
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="menu-toggler fa fa-angle-up" data-toggle="collapse"
                                           data-target="#injectables-links"
                   ></span>
                               </div>
                               <ul class="links collapse in"
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/DrawingService.html" >DrawingService</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/SetupService.html" >SetupService</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../miscellaneous.html" ><span class="fa fa-cubes"></span>Miscellaneous</a>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/compodoc/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content component">
                   <div class="content-data">


<ol class="breadcrumb">
  <li>Components</li>
  <li>SimulationComponent</li>
</ol>


    <ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#infos" id="infos-tab" role="tab" data-toggle="tab">Infos</a>
        </li>
        <li>
            <a href="#source" role="tab" id="source-tab" data-toggle="tab">Source</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade active in" id="infos"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/simulation/simulation.component.ts</code>
</p>



<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>












            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-simulation</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>simulation.component.css</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>simulation.component.html</code></td>
            </tr>


        </tbody>
    </table>
</section>



    <section>
        <h3 id="constructor">Constructor</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <code>constructor(drawingService: <a href="../injectables/DrawingService.html" >DrawingService</a>, setupService: <a href="../injectables/SetupService.html" >SetupService</a>)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>W konstruktorze wykorzystujemy mechanizm dependency injection i wstrzykujemy instancje serwisów odpowiedzialnych<br>za ustawienia mapy(SetupService) oraz rysowanie mapy(DrawingService).<br>Jako aktualny model symulacji przyjmujemy ten przechowywany w SetupService.</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="methods">Methods</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b><span class="modifier">Private</span> setupChart</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <span class="modifier-icon method fa fa-play lock">
                                    <span class="fa fa-lock"></span>
                                </span>
                            <code>setupChart()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda odpowiedzialna za inicjalizację komponentu wykresu i przypisanie mu odpowiedniego modelu danych.</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> runSimulation</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>runSimulation(start_time: string, end_time: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda rozpoczynająca proces symulacji, uruchamia główną pętlę symulacji.</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>start_time</b>
                                                    </div>
                                                    <div>
                                                        <p>czas rozpoczęcia symulacji w formacie HH:MM:SS (np. 22:45:17)</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>end_time</b>
                                                    </div>
                                                    <div>
                                                        <p>czas zakończenia symulacji w formacie HH:MM:SS (np. 23:45:17)</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> calculateSimulationTime</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>calculateSimulationTime(start_time: string, end_time: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda obliczająca czas symulacji na podstawie czasów wejściowych.<br>Obliczony czas jest zwracany jako ilość iteracji do wykonania (this.iterations)<br>TODO: trzeba sprawdzić mechanizm działania w przypadku gdy czas zakończenia jest<br>po czasie rozpoczęcia nastepnego dnia (np. 00:30:00).</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>start_time</b>
                                                    </div>
                                                    <div>
                                                        <p>czas rozpoczęcia symulacji w formacie HH:MM:SS (np. 22:45:17)</p>
    
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <b>end_time</b>
                                                    </div>
                                                    <div>
                                                        <p>czas zakończenia symulacji w formacie HH:MM:SS (np. 23:45:17)</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> parseStartTime</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>parseStartTime(start_time: string)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda parsuje podaną godzinę i konwertuje ją na timestamp zapisany w sekundach.</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>start_time</b>
                                                    </div>
                                                    <div>
                                                        <p>czas rozpoczęcia symulacji w formacie HH:MM:SS (np. 22:45:17)</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>number</code>
    
                                </div>
                                    <div class="io-description">
                                        <p>Przekonwertowana godzina przedstawiona jako timestamp (w sekundach)</p>
    
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> saveSimmulationState</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>saveSimmulationState(timestamp: number)</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda zapisuje stan symulacji do historii.</p>
    </div>
                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <ul class="jsdoc-params">
                                                <li>
                                                    <div>
                                                        <b>timestamp</b>
                                                    </div>
                                                    <div>
                                                        <p>timestamp zapisywanej iteracji</p>
    
                                                    </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                                    <div class="io-description">
                                        
                                    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> stopSimulation</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>stopSimulation()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda wstrzymuje wykonywanie symulacji.</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> calculatePowerUsage</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>calculatePowerUsage()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda oblicza zużycie energii zarówno dla wariantu z wykorzystaniem<br>systemu inteligentnego oświetlenia, jak i bez niego. Model obliczeniowy jest dość prymitywny, tutaj można się wykazać ;-).</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> calculateSavedMoney</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>calculateSavedMoney()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda przelicza zużycie energii i oblicza oszczędności (lub ich brak).</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> handleSystemIteration</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>handleSystemIteration()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda przetwarza jedną iterację systemu. Sprawdza kolizje, wywołuje metody aktualizacji modelu i zasobów.</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> addCar</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>addCar()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda dodaje pojazd do symulacji(aktualizuje stan modelu).</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> removeCar</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>removeCar()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda usuwa pojazd z symulacji(aktualizuje stan modelu).</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> loadHistoryState</b>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
    <code>loadHistoryState()</code>
                        </td>
                    </tr>
    
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Metoda ładuje do komponentu historyczny model symulacji (aktualnie, pozwala tylko na śledzenie stanu symulacji,<br>jednak mechanizm ma duży potencjał rozwojowy.</p>
    </div>
                                <div class="io-description">
                                    <b>Returns: </b>    <code>void</code>
    
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>

    <section>
        <h3 id="inputs">Properties</h3>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> carCounter</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>carCounter:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Licznik pojazdów w symulacji</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> endTime</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>endTime:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Timestamp informujący o czasie zakończenia aktualnie trwającej symulacji (w sekundach)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> firstStart</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>firstStart:     <code>boolean</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>true</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Atrybut przechowujący informację o tym, czy uruchomienie symulacji wykonane jest po raz pierwszy<br>Wykorzystane dla ustawień możliwych do konfiguracji tylko przed pierwszym uruchomieniem</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> firstStartTime</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>firstStartTime:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Timestamp informujący o czasie pierwszego uruchomienia symulacji (w sekundach)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> iteration</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>iteration:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>0</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Numer aktualnej iteracji systemu</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> iterations</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>iterations:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>3600</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Liczba wszystkich iteracji</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> kwhPrice</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>kwhPrice:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>0.39975</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Cena prądu (w hurcie :D)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> model</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>model:     <code><a href="../classes/SmartCityModel.html" target="_self" >SmartCityModel</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Model symulacji dla aktualnej iteracji systemu</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> selectedTimestamp</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>selectedTimestamp:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>0</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Pomocniczy atrybut przechowujący timestamp aktualnie wybranej iteracji symulacji (używany w mechanizmie danych historycznych)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> simulationHistory</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>simulationHistory:     <code><a href="../classes/SimulationState.html" target="_self" >SimulationState[]</a></code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Lista przechowująca historię symulacji. Jeden element listy równy jest jednej iteracji systemu<br>TODO: przerobić mechanizm histori, nie jest to najoptymalniejsze rozwiązanie, ale za to najszybsze :D</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> simulationRun</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>simulationRun:     <code>boolean</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>false</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Atrybut przechowujący informację o tym, czy symulacja jest w stanie RUN czy nie</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> simulationTimeStep</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>simulationTimeStep:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>1</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Krok symulacji, w rzeczywistości nie zaimplementowano niczego sensownego korzystającego z tego atrybutu</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> startTime</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>startTime:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Timestamp informujący o czasie uruchomienia aktualnie trwającej symulacji (w sekundach)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> stepWattNormalPower</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>stepWattNormalPower:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Zużycie prądu w aktualnym kroku symulacji w przypadku nie korzystania z systemu (stałe w czasie zużycie energii przez lampy)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> stepWattPower</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>stepWattPower:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Zużycie prądu w aktualnym kroku symulacji w przypadku korzystania z systemu (zmienne w czasie zużycie energii przez lampy)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-bordered">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <b> timeInterval</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <code>timeInterval:     <code>number</code>
    </bcode>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                <i>Default value: </i><code>20</code>
                            </td>
                        </tr>
                    <tr>
                        <td class="col-md-4">
                            <div class="io-description"><p>Odstep czasowy między iteracjami systemu (a raczej interwał uruchamiania kolejnych iteracji)</p>
    </div>
                        </td>
                    </tr>
                </tbody>
            </table>
    </section>
</div>
        <div class="tab-pane fade tab-source-code" id="source">
            <pre><code class="hljs javascript">import { Component, OnInit } from &#x27;@angular/core&#x27;;
import { DrawingService } from &#x27;../services/drawing.service&#x27;;
import MovingObject from &#x27;../model/moving-object&#x27;;
import { MovingObjectType } from &#x27;../model/moving-object-type&#x27;;
import SmartCityModel from &#x27;../model/smart-city-model&#x27;;
import SimulationState from &#x27;../model/simulation-state&#x27;;
import Chart from &#x27;chart.js&#x27;;
import { SetupService } from &#x27;../services/setup.service&#x27;;

@Component({
  selector: &#x27;app-simulation&#x27;,
  templateUrl: &#x27;./simulation.component.html&#x27;,
  styleUrls: [&#x27;./simulation.component.css&#x27;]
})

/**
 * Komponent obsługujący proces symulacji, zawiera model, historię i ustawienia symulacji.
 * Komunikuje się z widokiem odpowiedzialnym za rysowanie planszy poprzez DrawingService.
 */
export class SimulationComponent implements OnInit {
  /**
   * Numer aktualnej iteracji systemu
   */
  iteration &#x3D; 0;
  /**
   * Liczba wszystkich iteracji
   */
  iterations &#x3D; 3600;
  /**
   * Odstep czasowy między iteracjami systemu (a raczej interwał uruchamiania kolejnych iteracji)
   */
  timeInterval &#x3D; 20;
  /**
   * Model symulacji dla aktualnej iteracji systemu
   */
  model: SmartCityModel;
  /**
   * Atrybut przechowujący informację o tym, czy symulacja jest w stanie RUN czy nie
   */
  simulationRun &#x3D; false;
  /**
   * Atrybut przechowujący informację o tym, czy uruchomienie symulacji wykonane jest po raz pierwszy
   * Wykorzystane dla ustawień możliwych do konfiguracji tylko przed pierwszym uruchomieniem
   */
  firstStart &#x3D; true;
  /**
   * Timestamp informujący o czasie pierwszego uruchomienia symulacji (w sekundach)
   */
  firstStartTime: number;
  /**
   * Lista przechowująca historię symulacji. Jeden element listy równy jest jednej iteracji systemu
   * TODO: przerobić mechanizm histori, nie jest to najoptymalniejsze rozwiązanie, ale za to najszybsze :D
   */
  simulationHistory: SimulationState[] &#x3D; [];
  /**
   * Timestamp informujący o czasie uruchomienia aktualnie trwającej symulacji (w sekundach)
   */
  startTime: number;
  /**
   * Timestamp informujący o czasie zakończenia aktualnie trwającej symulacji (w sekundach)
   */
  endTime: number;
  /**
   * Licznik pojazdów w symulacji
   */
  carCounter: number;
  /**
   * Pomocniczy atrybut przechowujący timestamp aktualnie wybranej iteracji symulacji (używany w mechanizmie danych historycznych)
   */
  selectedTimestamp &#x3D; 0;
  /**
   * Krok symulacji, w rzeczywistości nie zaimplementowano niczego sensownego korzystającego z tego atrybutu
   */
  simulationTimeStep &#x3D; 1;
  /**
   * Zużycie prądu w aktualnym kroku symulacji w przypadku nie korzystania z systemu (stałe w czasie zużycie energii przez lampy)
   */
  stepWattNormalPower: number;
  /**
   * Zużycie prądu w aktualnym kroku symulacji w przypadku korzystania z systemu (zmienne w czasie zużycie energii przez lampy)
   */
  stepWattPower: number;
  /**
   * Cena prądu (w hurcie :D)
   */
  kwhPrice &#x3D; 0.39975;

  /**
   * W konstruktorze wykorzystujemy mechanizm dependency injection i wstrzykujemy instancje serwisów odpowiedzialnych
   * za ustawienia mapy(SetupService) oraz rysowanie mapy(DrawingService).
   * Jako aktualny model symulacji przyjmujemy ten przechowywany w SetupService.
   */
  constructor(
    private drawingService: DrawingService,
    private setupService: SetupService) {
    this.model &#x3D; this.setupService.selectedModel;
  }

  /**
   * Metoda inicjalizuje atrybuty komponentu domyslnymi wartościami:
   * czas rozpoczęcia (aktualny czas), zakończenia(+1h) oraz licznik pojazdów.
   */
  ngOnInit() {
    // this.runSimulation(1000);
    this.startTime &#x3D; (Date.now() / 1000);
    this.endTime &#x3D; this.startTime + 3600;
    this.carCounter &#x3D; this.model.objects.length;
    this.setupChart();
  }

  /**
   * Metoda odpowiedzialna za inicjalizację komponentu wykresu i przypisanie mu odpowiedniego modelu danych.
   */
  private setupChart() {
    const canvas &#x3D; &lt;HTMLCanvasElement&gt;document.getElementById(&#x27;chart&#x27;);
    const context &#x3D; canvas.getContext(&#x27;2d&#x27;);
    context.imageSmoothingEnabled &#x3D; false;
    const chart &#x3D; new Chart(context, {
      &#x27;type&#x27;: &#x27;line&#x27;, &#x27;data&#x27;: {
        &#x27;labels&#x27;: [],
        &#x27;datasets&#x27;: [{ &#x27;label&#x27;: &#x27;Zaoszczędzona energia [%]&#x27;, &#x27;data&#x27;: [],
         &#x27;fill&#x27;: false, &#x27;borderColor&#x27;: &#x27;rgb(75, 192, 192)&#x27;, &#x27;lineTension&#x27;: 0.1 }]
      }, &#x27;options&#x27;: {}
    });
    setInterval(() &#x3D;&gt; {
      if (this.model &amp;&amp; this.simulationRun) {
        if (chart.data.labels.length &gt; 50) {
          chart.data.labels.shift();
          chart.data.datasets[0].data.shift();
        }
        chart.data.labels.push(&#x27;&#x27;);
        chart.data.datasets[0].data.push(100 - this.model.totalEnergyUsage / this.model.totalEnergyNormalUsage * 100);
        chart.update();
      }
    }, 1000);
  }

  /**
   * Metoda rozpoczynająca proces symulacji, uruchamia główną pętlę symulacji.
   * @param start_time czas rozpoczęcia symulacji w formacie HH:MM:SS (np. 22:45:17)
   * @param end_time czas zakończenia symulacji w formacie HH:MM:SS (np. 23:45:17)
   */
  runSimulation(start_time: string, end_time: string) {
    this.calculateSimulationTime(start_time, end_time);

    if (this.firstStart) {
      this.firstStartTime &#x3D; this.startTime;
      this.firstStart &#x3D; false;
      this.model.priceBuffor &#x3D; this.model.savedMoney;
      this.model.savedMoney &#x3D; 0;
    } else {
      this.model &#x3D; this.simulationHistory[this.simulationHistory.length - 1].state;
      this.startTime &#x3D; this.simulationHistory[this.simulationHistory.length - 1].timestamp;
    }

    let i &#x3D; this.iterations;

    this.simulationRun &#x3D; true;

    const simulation &#x3D; setInterval(() &#x3D;&gt; {
      if (i &#x3D;&#x3D;&#x3D; 0) {
        this.firstStart &#x3D; true;
      }
      if ((i &#x3D;&#x3D;&#x3D; 0) || !this.simulationRun) {
        this.simulationRun &#x3D; false;
        clearInterval(simulation);
      }
      this.handleSystemIteration();
      this.iteration++;
      this.startTime +&#x3D; this.simulationTimeStep;
      i--;
      this.saveSimmulationState(this.startTime);
      this.drawingService.setLampList(this.model);
    }, this.timeInterval);
  }

  /**
   * Metoda obliczająca czas symulacji na podstawie czasów wejściowych.
   * Obliczony czas jest zwracany jako ilość iteracji do wykonania (this.iterations)
   * TODO: trzeba sprawdzić mechanizm działania w przypadku gdy czas zakończenia jest
   * po czasie rozpoczęcia nastepnego dnia (np. 00:30:00).
   * @param start_time czas rozpoczęcia symulacji w formacie HH:MM:SS (np. 22:45:17)
   * @param end_time czas zakończenia symulacji w formacie HH:MM:SS (np. 23:45:17)
   */
  calculateSimulationTime(start_time: string, end_time: string) {
    this.startTime &#x3D; this.parseStartTime(start_time);
    this.endTime &#x3D; this.parseStartTime(end_time);
    if (this.endTime &lt; this.startTime) {
      this.iterations &#x3D; this.endTime + 60 * 60 * 24;
    } else {
      this.iterations &#x3D; Math.abs(this.endTime - this.startTime);
    }
  }

  /**
   * Metoda parsuje podaną godzinę i konwertuje ją na timestamp zapisany w sekundach.
   * @param start_time czas rozpoczęcia symulacji w formacie HH:MM:SS (np. 22:45:17)
   * @returns Przekonwertowana godzina przedstawiona jako timestamp (w sekundach)
   */
  parseStartTime(start_time: string): number {
    const today &#x3D; new Date();
    const time_t &#x3D; start_time.trim().split(&#x27;:&#x27;);
    const hour &#x3D; Number(time_t[0]);
    const minutes &#x3D; Number(time_t[1]);
    const seconds &#x3D; Number(time_t[2]);

    return new Date(today.getFullYear(), today.getMonth(), today.getDate(), hour, minutes, seconds).getTime() / 1000;
  }

  /**
   * Metoda zapisuje stan symulacji do historii.
   * @param timestamp timestamp zapisywanej iteracji
   */
  saveSimmulationState(timestamp: number) {
    const record &#x3D; new SimulationState();
    record.timestamp &#x3D; timestamp;
    record.state &#x3D; this.model.clone();
    this.simulationHistory.push(record);
    this.selectedTimestamp &#x3D; this.simulationHistory.length;
  }

  /**
   * Metoda wstrzymuje wykonywanie symulacji.
   */
  stopSimulation() {
    this.simulationRun &#x3D; false;
  }

  /**
   * Metoda oblicza zużycie energii zarówno dla wariantu z wykorzystaniem
   * systemu inteligentnego oświetlenia, jak i bez niego. Model obliczeniowy jest dość prymitywny, tutaj można się wykazać ;-).
   */
  calculatePowerUsage() {
    this.model.lampList.forEach((item) &#x3D;&gt; {
      this.stepWattNormalPower &#x3D; ((item.wattPower) / (1000 * 3600)) * this.simulationTimeStep;
      this.stepWattPower &#x3D; ((item.conditionalPower * item.wattPower) / (1000 * 3600)) * this.simulationTimeStep;
      this.model.totalEnergyNormalUsage +&#x3D; this.stepWattNormalPower;
      this.model.totalEnergyUsage +&#x3D; this.stepWattPower;
    });
  }

  /**
   * Metoda przelicza zużycie energii i oblicza oszczędności (lub ich brak).
   */
  calculateSavedMoney() {
    this.model.savedMoney &#x3D; ((this.model.totalEnergyNormalUsage - this.model.totalEnergyUsage) * this.kwhPrice) + this.model.priceBuffor;
  }

  /**
   * Metoda przetwarza jedną iterację systemu. Sprawdza kolizje, wywołuje metody aktualizacji modelu i zasobów.
   */
  handleSystemIteration() {
    this.model.objects.filter(o &#x3D;&gt; o.type &#x3D;&#x3D; MovingObjectType.Car).forEach((object: MovingObject) &#x3D;&gt; {
      const junction &#x3D; this.model.junctions.find(j &#x3D;&gt;
        ((j.posX + j.size &gt; object.posX &amp;&amp; j.posX - j.size &lt; object.posX)
        &amp;&amp; (j.posY + j.size &gt; object.posY &amp;&amp; j.posY - j.size &lt; object.posY)));

      if (junction) {
        junction.setDirection(object);
      }
      object.move();
    });
    this.model.lampList.forEach((item) &#x3D;&gt; {
      item.updatePowerFromSensor(this.model.objects);
      this.calculatePowerUsage();
    });
    this.calculateSavedMoney();
  }

  /**
   * Metoda dodaje pojazd do symulacji(aktualizuje stan modelu).
   */
  addCar() {
    const speed &#x3D; Math.floor((Math.random() * 12) + 1);
    // tslint:disable-next-line:max-line-length
    const car &#x3D; new MovingObject(this.carCounter, 1100, 150, speed, MovingObjectType.Car, &#x27;#&#x27; + ((1 &lt;&lt; 24) * Math.random() | 0).toString(16));
    this.model.objects.push(car);
    this.carCounter++;
  }

  /**
   * Metoda usuwa pojazd z symulacji(aktualizuje stan modelu).
   */
  removeCar() {
    this.model.objects.pop();
    this.carCounter--;
  }

  /**
   * Metoda ładuje do komponentu historyczny model symulacji (aktualnie, pozwala tylko na śledzenie stanu symulacji,
   * jednak mechanizm ma duży potencjał rozwojowy.
   */
  loadHistoryState() {
    this.model &#x3D; this.simulationHistory[this.selectedTimestamp].state;
    this.startTime &#x3D; this.simulationHistory[this.selectedTimestamp].timestamp;
    this.drawingService.setLampList(this.model);
  }
}

</code></pre>
        </div>
    </div>










                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/menu.js"></script>
       <script src="../js/libs/highlight.pack.js"></script>
       <script src="../js/libs/highlightjs-line-numbers.min.js"></script>
       <script src="../js/search/search_index.js"></script>
       <script>
            document.addEventListener('DOMContentLoaded', function() {
                hljs.initHighlightingOnLoad();
                hljs.initLineNumbersOnLoad();
            });
       </script>

    </body>
</html>
